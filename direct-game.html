<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Direct Pong Game</title>
    <style>
        body { 
            font-family: 'Courier New', monospace; 
            background: #000; 
            color: #fff; 
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }
        h1 { 
            color: #fff; 
            margin-bottom: 20px; 
        }
        #gameCanvas { 
            border: 2px solid #fff; 
            background: #000; 
            margin: 20px 0;
        }
        .controls { 
            color: #fff; 
            text-align: center; 
            margin: 10px 0;
        }
        button {
            background: #fff;
            color: #000;
            border: none;
            padding: 15px 30px;
            font-size: 1.2em;
            font-family: inherit;
            cursor: pointer;
            margin: 10px;
            border-radius: 5px;
        }
        button:hover {
            background: #ccc;
        }
        .instructions {
            background: #333;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            max-width: 600px;
        }
    </style>
</head>
<body>
    <h1>üèì DIRECT PONG GAME üèì</h1>
    
    <div class="instructions">
        <h3>üéÆ How to Play:</h3>
        <p><strong>Player 1 (Left):</strong> W (up) / S (down)</p>
        <p><strong>Player 2 (Right):</strong> ‚Üë (up) / ‚Üì (down)</p>
        <p><strong>Start Game:</strong> Press SPACEBAR</p>
        <p><strong>Restart:</strong> Press R when game ends</p>
        <p><strong>Goal:</strong> First to 5 points wins!</p>
    </div>

    <canvas id="gameCanvas" width="800" height="400"></canvas>
    
    <div class="controls">
        <p id="gameStatus">Press SPACE to start the game!</p>
    </div>

    <button onclick="restartGame()">New Game</button>
    <button onclick="window.location.href='https://localhost:8443'">Back to Main Menu</button>

    <script>
        // Simplified Pong Game - Direct Implementation
        class SimplePongGame {
            constructor(canvas) {
                this.canvas = canvas;
                this.ctx = canvas.getContext('2d');
                this.keys = {};
                this.gameRunning = false;
                this.animationId = null;
                
                // Game state
                this.player1 = {
                    x: 20,
                    y: canvas.height / 2 - 50,
                    width: 10,
                    height: 100,
                    speed: 6,
                    score: 0
                };
                
                this.player2 = {
                    x: canvas.width - 30,
                    y: canvas.height / 2 - 50,
                    width: 10,
                    height: 100,
                    speed: 6,
                    score: 0
                };
                
                this.ball = {
                    x: canvas.width / 2,
                    y: canvas.height / 2,
                    radius: 8,
                    speedX: 5,
                    speedY: 4
                };
                
                this.winner = null;
                this.maxScore = 5;
                
                this.setupControls();
                this.draw();
            }
            
            setupControls() {
                document.addEventListener('keydown', (e) => {
                    this.keys[e.key.toLowerCase()] = true;
                    
                    if (e.key === ' ' && !this.gameRunning && !this.winner) {
                        this.startGame();
                    }
                    
                    if (e.key.toLowerCase() === 'r' && this.winner) {
                        this.resetGame();
                    }
                });
                
                document.addEventListener('keyup', (e) => {
                    this.keys[e.key.toLowerCase()] = false;
                });
            }
            
            startGame() {
                this.gameRunning = true;
                document.getElementById('gameStatus').textContent = 'Game in progress - First to 5 wins!';
                this.gameLoop();
            }
            
            gameLoop() {
                if (!this.gameRunning) return;
                
                this.update();
                this.draw();
                
                this.animationId = requestAnimationFrame(() => this.gameLoop());
            }
            
            update() {
                // Player 1 controls
                if (this.keys['w'] && this.player1.y > 0) {
                    this.player1.y -= this.player1.speed;
                }
                if (this.keys['s'] && this.player1.y < this.canvas.height - this.player1.height) {
                    this.player1.y += this.player1.speed;
                }
                
                // Player 2 controls
                if (this.keys['arrowup'] && this.player2.y > 0) {
                    this.player2.y -= this.player2.speed;
                }
                if (this.keys['arrowdown'] && this.player2.y < this.canvas.height - this.player2.height) {
                    this.player2.y += this.player2.speed;
                }
                
                // Ball movement
                this.ball.x += this.ball.speedX;
                this.ball.y += this.ball.speedY;
                
                // Ball collision with top/bottom
                if (this.ball.y - this.ball.radius <= 0 || this.ball.y + this.ball.radius >= this.canvas.height) {
                    this.ball.speedY = -this.ball.speedY;
                }
                
                // Ball collision with paddles
                if (this.ball.x - this.ball.radius <= this.player1.x + this.player1.width &&
                    this.ball.y >= this.player1.y &&
                    this.ball.y <= this.player1.y + this.player1.height &&
                    this.ball.speedX < 0) {
                    this.ball.speedX = -this.ball.speedX;
                    const hitPos = (this.ball.y - this.player1.y) / this.player1.height;
                    this.ball.speedY = (hitPos - 0.5) * 10;
                }
                
                if (this.ball.x + this.ball.radius >= this.player2.x &&
                    this.ball.y >= this.player2.y &&
                    this.ball.y <= this.player2.y + this.player2.height &&
                    this.ball.speedX > 0) {
                    this.ball.speedX = -this.ball.speedX;
                    const hitPos = (this.ball.y - this.player2.y) / this.player2.height;
                    this.ball.speedY = (hitPos - 0.5) * 10;
                }
                
                // Scoring
                if (this.ball.x < 0) {
                    this.player2.score++;
                    this.resetBall();
                    this.checkWin();
                }
                
                if (this.ball.x > this.canvas.width) {
                    this.player1.score++;
                    this.resetBall();
                    this.checkWin();
                }
            }
            
            resetBall() {
                this.ball.x = this.canvas.width / 2;
                this.ball.y = this.canvas.height / 2;
                this.ball.speedX = Math.random() > 0.5 ? 5 : -5;
                this.ball.speedY = (Math.random() - 0.5) * 8;
            }
            
            checkWin() {
                if (this.player1.score >= this.maxScore) {
                    this.winner = 'Player 1';
                    this.gameRunning = false;
                    document.getElementById('gameStatus').textContent = 'üèÜ Player 1 Wins! Press R to restart';
                } else if (this.player2.score >= this.maxScore) {
                    this.winner = 'Player 2';
                    this.gameRunning = false;
                    document.getElementById('gameStatus').textContent = 'üèÜ Player 2 Wins! Press R to restart';
                }
            }
            
            draw() {
                // Clear canvas
                this.ctx.fillStyle = '#000';
                this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
                
                // Draw center line
                this.ctx.strokeStyle = '#fff';
                this.ctx.setLineDash([10, 10]);
                this.ctx.beginPath();
                this.ctx.moveTo(this.canvas.width / 2, 0);
                this.ctx.lineTo(this.canvas.width / 2, this.canvas.height);
                this.ctx.stroke();
                this.ctx.setLineDash([]);
                
                // Draw paddles
                this.ctx.fillStyle = '#fff';
                this.ctx.fillRect(this.player1.x, this.player1.y, this.player1.width, this.player1.height);
                this.ctx.fillRect(this.player2.x, this.player2.y, this.player2.width, this.player2.height);
                
                // Draw ball
                this.ctx.beginPath();
                this.ctx.arc(this.ball.x, this.ball.y, this.ball.radius, 0, Math.PI * 2);
                this.ctx.fill();
                
                // Draw scores
                this.ctx.font = '48px Courier New';
                this.ctx.textAlign = 'center';
                this.ctx.fillText(this.player1.score.toString(), this.canvas.width / 4, 60);
                this.ctx.fillText(this.player2.score.toString(), (this.canvas.width * 3) / 4, 60);
                
                // Draw player labels
                this.ctx.font = '20px Courier New';
                this.ctx.fillText('Player 1', this.canvas.width / 4, 90);
                this.ctx.fillText('Player 2', (this.canvas.width * 3) / 4, 90);
                
                // Draw instructions if not playing
                if (!this.gameRunning && !this.winner) {
                    this.ctx.font = '24px Courier New';
                    this.ctx.fillText('Press SPACE to start!', this.canvas.width / 2, this.canvas.height / 2 + 50);
                }
                
                if (this.winner) {
                    this.ctx.font = '36px Courier New';
                    this.ctx.fillText(`${this.winner} WINS!`, this.canvas.width / 2, this.canvas.height / 2);
                    this.ctx.font = '20px Courier New';
                    this.ctx.fillText('Press R to restart', this.canvas.width / 2, this.canvas.height / 2 + 40);
                }
            }
            
            resetGame() {
                this.gameRunning = false;
                this.winner = null;
                this.player1.score = 0;
                this.player2.score = 0;
                this.player1.y = this.canvas.height / 2 - 50;
                this.player2.y = this.canvas.height / 2 - 50;
                this.resetBall();
                document.getElementById('gameStatus').textContent = 'Press SPACE to start the game!';
                this.draw();
            }
            
            destroy() {
                if (this.animationId) {
                    cancelAnimationFrame(this.animationId);
                }
            }
        }
        
        // Initialize game
        let game;
        
        window.addEventListener('load', () => {
            const canvas = document.getElementById('gameCanvas');
            game = new SimplePongGame(canvas);
            console.log('Direct Pong Game loaded successfully!');
        });
        
        function restartGame() {
            if (game) {
                game.resetGame();
            }
        }
        
        // Cleanup on page unload
        window.addEventListener('beforeunload', () => {
            if (game) {
                game.destroy();
            }
        });
    </script>
</body>
</html>